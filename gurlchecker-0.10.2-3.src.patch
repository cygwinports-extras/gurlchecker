--- origsrc/gurlchecker-0.10.2/configure.in	2008-07-06 16:11:57.234375000 -0500
+++ src/gurlchecker-0.10.2/configure.in	2008-07-06 16:11:59.593750000 -0500
@@ -319,6 +319,13 @@
 AC_SUBST(GNUTLS_LIBS)
 AC_SUBST(GNUTLS_FLAGS)
 
+################################################
+# docbook stuff (for manpage)
+################################################
+
+AC_CHECK_PROGS(DB2MAN, [docbook-to-man db2man docbook2man], :)
+AM_CONDITIONAL(ENABLE_MANPAGE, test "x$DB2MAN" != "x:")
+
 echo "*****************************************"
 
 PKG_CHECK_MODULES(PACKAGE, [$pkg_modules])
--- origsrc/gurlchecker-0.10.2/man/Makefile.am	2006-12-28 02:47:09.000000000 -0600
+++ src/gurlchecker-0.10.2/man/Makefile.am	2008-07-06 16:11:59.609375000 -0500
@@ -7,8 +7,11 @@
 
 MAINTAINERCLEANFILES = Makefile.in
 
+if ENABLE_MANPAGE
+
 man1_MANS = gurlchecker.1
 
 gurlchecker.1 : make-doc gurlchecker.sgml
-	./$^ $@
+	${srcdir}/make-doc ${srcdir}/gurlchecker.sgml $@
 
+endif
--- origsrc/gurlchecker-0.10.2/src/general.h	2007-10-07 03:17:35.000000000 -0500
+++ src/gurlchecker-0.10.2/src/general.h	2008-07-06 16:11:59.625000000 -0500
@@ -67,8 +67,12 @@
  *
  * Macro to determine the system we are running on.
  */
+#if defined(__linux__) || defined(__CYGWIN__)
 #ifdef __linux__
 #define UC_SYSTEM_NAME "Linux"
+#elif __CYGWIN__
+#define UC_SYSTEM_NAME "Cygwin"
+#endif
 #include <sys/vfs.h>
 #elif defined(__NetBSD__) || defined(__OpenBSD__) || defined(__FreeBSD__)
 #ifdef __NetBSD__
--- origsrc/gurlchecker-0.10.2/src/ucclam.c	2007-04-25 00:41:44.000000000 -0500
+++ src/gurlchecker-0.10.2/src/ucclam.c	2008-07-06 16:17:08.500000000 -0500
@@ -34,9 +34,8 @@
   clam->limits.maxfiles = 1;
   clam->limits.maxfilesize = 10 * 1048576;
   clam->limits.maxreclevel = 1;
-  clam->limits.maxratio = 200;
   clam->limits.archivememlim = 0;
-  if (cl_loaddbdir (cl_retdbdir (), &clam->root, &clam->no) ||
+  if (cl_load (cl_retdbdir (), &clam->root, &clam->no, CL_DB_STDOPT) ||
       cl_build (clam->root))
     {
       uc_ucclam_free (clam);
